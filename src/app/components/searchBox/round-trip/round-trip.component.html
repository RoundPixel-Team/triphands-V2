<div class="searchBox">
  <form [formGroup]="searchbox.searchFlight" [dir]="translate.currentLang == 'ar' ? 'rtl' : 'ltr'">
    <div class="container-fluid">
      <div class="row">
        <ng-container formArrayName="Flights">
          <ng-container
            *ngFor="let item of searchbox.flightsArray['controls'] | slice : 0 : 1; let i = index">
            <ng-container [formGroupName]="0">
                <!-- Depart City -->
                <div class="col-12 col-md-12 col-lg-3">
                  <mat-form-field color='accent' appearance="outline">
                      <input formControlName="departing" type="text" placeholder="{{'searchbox.leaveFrom' | translate}}" aria-label="City" matInput [matAutocomplete]="autoa" #firstD class="searchboxInput">
                      <mat-autocomplete #autoa="matAutocomplete">
                        <mat-option *ngFor="let city of citiesen|filterCity:item.get('departing')!.value|limitTo:5"
                          [value]="city.cityName +','+ city.airportCode" >
  
                          <span [innerHTML]="city.airportName| highlighter:item.get('departing')!.value"></span> -
                          <span [innerHTML]="city.countryName| highlighter:item.get('departing')!.value"></span> (
                          <span [innerHTML]="city.airportCode| highlighter:item.get('departing')!.value"></span> )
                        </mat-option>
                      </mat-autocomplete>  
                  </mat-form-field>
                </div>
                  <!-- Land City -->
                <div class="col-12 col-md-12 col-lg-3">
                  <mat-form-field color='accent' appearance="outline">
                      <input formControlName="landing" type="text" placeholder="{{'searchbox.goingTo' | translate}}" aria-label="City" matInput [matAutocomplete]="autob" #firstAr class="searchboxInput">
                      <mat-autocomplete #autob="matAutocomplete">
                        <mat-option *ngFor="let city of citiesen|filterCity:item.get('landing')!.value|limitTo:5"
                          [value]="city.cityName +'('+  city.airportCode +')' ">

                          <span [innerHTML]="city.airportName| highlighter:item.get('landing')!.value"></span> -
                          <span [innerHTML]="city.countryName| highlighter:item.get('landing')!.value"></span> (
                          <span [innerHTML]="city.airportCode| highlighter:item.get('landing')!.value"></span>)
                        </mat-option>
                      </mat-autocomplete>
                  </mat-form-field>
                </div>
                <!-- {{searchbox.flightsArray.at(0).get('departingD')?.value | date:'MMMM dd'}} -->
                <!-- Depart Date -->
                <!-- Retrurn Date -->
                <div class="col-12 col-md-12 col-lg-3">
                  <div class="dp-hidden position-absolute">
                    <div class="input-group">
                      <input
                        name="datepicker"
                        class="form-control"
                        ngbDatepicker
                        #datepicker="ngbDatepicker"
                        [autoClose]="'outside'"
                        (dateSelect)="onDateSelection($event)"
                        [displayMonths]="2"
                        [dayTemplate]="t"
                        outsideDays="hidden"
                        [startDate]="fromDate!"
                        tabindex="-1"
                      />
                      <ng-template #t let-date let-focused="focused">
                        <span
                          class="custom-day"
                          [class.focused]="focused"
                          [class.range]="isRange(date)"
                          [class.faded]="isHovered(date) || isInside(date)"
                          (mouseenter)="hoveredDate = date"
                          (mouseleave)="hoveredDate = null"
                        >
                          {{ date.day }}
                        </span>
                      </ng-template>
                    </div>
                  </div>
                  <div class="input-group">
                    <input
                      #dpFromDate
                      class="form-control"
                      placeholder="yyyy-mm-dd"
                      name="dpFromDate"
                      [value]="formatter.format(fromDate)"
                      (input)="fromDate = validateInput(fromDate, dpFromDate.value)"
                    />
                    <button class="btn btn-outline-secondary bi bi-calendar3" (click)="datepicker.toggle()" type="button"></button>
                  </div>
                </div>
                <div class="col-12 col-md-12 col-lg-3">
                  <div class="input-group">
                    <input
                      #dpToDate
                      class="form-control"
                      placeholder="yyyy-mm-dd"
                      name="dpToDate"
                      [value]="formatter.format(toDate)"
                      (input)="toDate = validateInput(toDate, dpToDate.value)"
                    />
                    <button class="btn btn-outline-secondary bi bi-calendar3" (click)="datepicker.toggle()" type="button"></button>
                  </div>
                </div>
                <!-- Travelers/Class -->
            </ng-container>
          </ng-container>
        </ng-container>
      </div>
    </div>
  </form>
</div>
